<BaseDialog DialogId="question-editing-dialog" @ref="baseDialogRef">
    @if (isTypeChoosingState) {
        <NewQuestionTypeChoosing CancelAction="()=>{Close();}" TestId="@testId"
                                 GoToNextStageAction="ChangeToQuestionEditing" />
    }
    else {
        <QuestionEditingContent CloseAction="()=>{Close();}" QuestionId="@questionId" />
    }

</BaseDialog>
@code {
    private BaseDialog baseDialogRef;
    private bool isTypeChoosingState = true;
    private DraftTestQuestionId questionId;

    [Parameter] public AppUserId creatorId { get; set; }
    [Parameter] public DraftTestId testId { get; set; }

    private async void ChangeToQuestionEditing(DraftTestQuestionId id) {
        questionId = id;
        isTypeChoosingState = false;
        await baseDialogRef.OpenAsync();
        StateHasChanged();
    }

    public async void NewQuestion() {
        isTypeChoosingState = true;
        await baseDialogRef.OpenAsync();

    }
    public async void EditQuestion(DraftTestQuestionId id) {
        questionId = id;
        isTypeChoosingState = false;
        await baseDialogRef.OpenAsync();
    }

    private async Task Close() => await baseDialogRef.CloseAsync();
}
