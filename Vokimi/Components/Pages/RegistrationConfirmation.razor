@using Microsoft.AspNetCore.WebUtilities


@page "/registration-confirmation"
@inject NavigationManager Navigation

<h3>Registration Confirmation</h3>

@if (!string.IsNullOrEmpty(Email) && !string.IsNullOrEmpty(Code))
{
    <p>Email: @Email</p>
    <p>Confirmation Code: @Code</p>
}
else
{
    <p>Loading...</p>
}

@code {
    private string Email { get; set; } = string.Empty;
    private string Code { get; set; } = string.Empty;

    protected override void OnInitialized()
    {
        var uri = Navigation.ToAbsoluteUri(Navigation.Uri);
        if (QueryHelpers.ParseQuery(uri.Query).TryGetValue("email", out var email))
        {
            Email = email;
        }

        if (QueryHelpers.ParseQuery(uri.Query).TryGetValue("code", out var code))
        {
            Code = code;
        }
    }
}
