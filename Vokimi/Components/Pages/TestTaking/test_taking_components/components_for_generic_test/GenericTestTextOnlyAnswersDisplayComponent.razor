<div class="txt-only-answers-container">
    @foreach (var answer in Answers) {
        <p>
            <IsChosenAnswerInput IsMultichoice="@IsMultichoice"
                                 InputsGroupName="@inputsGroupName"
                                 IsSelected="@SelectedAnswersRef.Contains(answer.Id)"
                                 OnclickAction="@((isSelected) => OnAnswerSelectionChanged(answer.Id, isSelected))" />
            @answer.Text
        </p>
    }
</div>

@code {
    [Parameter] public IEnumerable<GenericTestTakingAnswerTextOnlyDto> Answers { get; set; }
    [Parameter] public bool IsMultichoice { get; set; }
    [Parameter] public HashSet<GenericTestAnswerId> SelectedAnswersRef { get; set; } = [];

    private string inputsGroupName;

    protected override void OnParametersSet() {
        inputsGroupName = $"answers-group-{Guid.NewGuid()}";
        //LoadAnswersFromCookies
    }

    private void OnAnswerSelectionChanged(GenericTestAnswerId answerId, bool prevSelectedState) {
        if (IsMultichoice) {
            if (prevSelectedState) {
                SelectedAnswersRef.Add(answerId);
            } else {
                SelectedAnswersRef.Remove(answerId);
            }

        } else {
            SelectedAnswersRef = [answerId];
        }
    }
}
